dec10 =>

  input := io.stdin.read_string.trim.split "\n"
             .filter !=""
             .map (.split " ") .map data .as_array
  data(s) is
    lights := s[0].substring 1 s[0].byte_length-1 .codepoints.foldf (i32,i32) (0,1) e,c->
                (e.0|(c="#"?e.1:0),2*e.1)
               .0
    buttons := (s.drop 1 .take s.count-2).map (b->b.substring 1 b.byte_length-1 .split "," .foldf 0 e,c->e|1<<c.parse_i32.val)
#    say buttons
#    say "{lights.bin} {buttons.map (.bin)}"
    try(l,n) =>
      if l=lights then true
      else if n=0 then false
      else
        for b in buttons
        until try l^b n-1 then
        #          say "press {b.bin}"
#    say "READ: {data.this} from $s"
    public redef as_string String => "{lights.bin} {buttons.map (.bin)}"

  part1 =>
    input.map d->
           ((0..).drop_while n->(!d.try 0 n))[0]
         .sum

  part2 =>

  say "$part1:$part2"
