dec5 =>

  fr,id := io.stdin.read_string.trim.split "\n\n" .as_tuples.first.val
  fresh := fr.split "\n" .map (.split "-" .map (.parse_i64.val) .as_tuple)
  ids   := id.split "\n" .map (.parse_i64.val)

  none := fresh.take 0

  part1 =>
    ids.count i->
      fresh âˆƒ ||> a,b -> a<=i<=b

  separate(a,b) => a.1+1 < b.0 || b.1+1 < a.0
  join(a,b) => (min a.0 b.0, max a.1 b.1)

  part2 =>
    fresh.foldf none l,n->                  # create list of disjoint ranges, adding one range n at a time
        h, t := l.foldf (n, none) r,f->     # for each range f we found so far
          if separate r.0 f then (r.0, [f] ++ r.1)  # r.0 and f separate, so keep both
                            else (join r.0 f, r.1)  # else join r.0 and f
        [h] ++ t
      .map (||> a,b -> b-a+1)
      .sum

  say "$part1:$part2"
